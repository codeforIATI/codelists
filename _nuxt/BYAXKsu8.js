const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./xnsVXtE6.js","./BLtz059D.js","./entry.lwdqdwPP.css"])))=>i.map(i=>d[i]);
import{aW as W,aX as B,aY as q,x as P}from"#entry";const D=/\d/,F=["-","_","/","."];function H(t=""){if(!D.test(t))return t!==t.toLowerCase()}function E(t,r){const e=F,i=[];if(!t||typeof t!="string")return i;let s="",n,o;for(const c of t){const d=e.includes(c);if(d===!0){i.push(s),s="",n=void 0;continue}const a=H(c);if(o===!1){if(n===!1&&a===!0){i.push(s),s=c,n=a;continue}if(n===!0&&a===!1&&s.length>1){const l=s.at(-1);i.push(s.slice(0,Math.max(0,s.length-1))),s=l+c,n=a;continue}}s+=c,n=a,o=d}return i.push(s),i}function M(t){return t?t[0].toUpperCase()+t.slice(1):""}function Q(t,r){return t?(Array.isArray(t)?t:E(t)).map(e=>M(r?.normalize?e.toLowerCase():e)).join(""):""}function st(t,r){return t?(Array.isArray(t)?t:E(t)).map(e=>e.toLowerCase()).join("-"):""}function G(t){return{type:"root",children:t.value.map(I)}}function I(t){if(typeof t=="string")return{type:"text",value:t};const[r,e,...i]=t;return{type:"element",tag:r,props:e,children:i.map(I)}}const ot=W("mainStore",{state:()=>({codelists:[],codelistsObj:[]}),actions:{async fetch(){const t=await $fetch("/api/index.v2.json");this.codelists=Object.keys(t),this.codelistsObj=Object.values(t)}}}),L={content_en:"v3.5.0--13mlslrmpufWRmvgL7rQKCNqAYZBswwNjaF1HBmTxco",content_fr:"v3.5.0--46hP0SHdmuoPsTR355nGU_Mi-TB8NLhPk6JX0xxv8RU"},Y={content_en:"_content_content_en",content_fr:"_content_content_fr",info:"_content_info"},at={content_en:{type:"page",fields:{id:"string",title:"string",body:"json",description:"string",extension:"string",meta:"json",navigation:"json",path:"string",seo:"json",stem:"string"}},content_fr:{type:"page",fields:{id:"string",title:"string",body:"json",description:"string",extension:"string",meta:"json",navigation:"json",path:"string",seo:"json",stem:"string"}},info:{type:"data",fields:{}}},_=(t,r)=>{const e=t._conditions;return e.length>0?`(${e.join(` ${r} `)})`:""},v=t=>{const r=[],e={_conditions:r,where(i,s,n){let o;switch(s.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(n)){const c=n.map(d=>y(d)).join(", ");o=`"${String(i)}" ${s.toUpperCase()} (${c})`}else throw new TypeError(`Value for ${s} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(n)&&n.length===2)o=`"${String(i)}" ${s.toUpperCase()} ${y(n[0])} AND ${y(n[1])}`;else throw new Error(`Value for ${s} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":o=`"${String(i)}" ${s.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":o=`"${String(i)}" ${s.toUpperCase()} ${y(n)}`;break;default:o=`"${String(i)}" ${s} ${y(typeof n=="boolean"?Number(n):n)}`}return r.push(`${o}`),e},andWhere(i){const s=i(v());return r.push(_(s,"AND")),e},orWhere(i){const s=i(v());return r.push(_(s,"OR")),e}};return e},K=(t,r)=>{const e={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},i={__params:e,andWhere(n){const o=n(v());return e.conditions.push(_(o,"AND")),i},orWhere(n){const o=n(v());return e.conditions.push(_(o,"OR")),i},path(n){return i.where("path","=",B(n))},skip(n){return e.offset=n,i},where(n,o,c){return i.andWhere(d=>d.where(String(n),o,c)),i},limit(n){return e.limit=n,i},select(...n){return n.length&&e.selectedFields.push(...n),i},order(n,o){return e.orderBy.push(`"${String(n)}" ${o}`),i},async all(){return r(t,s()).then(n=>n||[])},async first(){return r(t,s({limit:1})).then(n=>n[0]||null)},async count(n="*",o=!1){return r(t,s({count:{field:String(n),distinct:o}})).then(c=>c[0].count)}};function s(n={}){let o="SELECT ";if(n?.count)o+=`COUNT(${n.count.distinct?"DISTINCT ":""}${n.count.field}) as count`;else{const d=Array.from(new Set(e.selectedFields));o+=d.length>0?d.map(a=>`"${String(a)}"`).join(", "):"*"}o+=` FROM ${Y[String(t)]}`,e.conditions.length>0&&(o+=` WHERE ${e.conditions.join(" AND ")}`),e.orderBy.length>0?o+=` ORDER BY ${e.orderBy.join(", ")}`:o+=" ORDER BY stem ASC";const c=n?.limit||e.limit;return c>0&&(e.offset>0?o+=` LIMIT ${c} OFFSET ${e.offset}`:o+=` LIMIT ${c}`),o}return i};function y(t){return`'${String(t).replace(/'/g,"''")}'`}function C(t){return r=>(r=r||{},(t||[]).filter(e=>typeof r[e]<"u").reduce((e,i)=>Object.assign(e,{[i]:r[i]}),{}))}async function V(t,r=[]){t.__params?.orderBy?.length||(t=t.order("stem","ASC"));const i=await t.orWhere(a=>a.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...r||[]).all(),{contents:s,configs:n}=i.reduce((a,l)=>{if(String(l.stem).split("/").pop()===".navigation"){l.title=l.title?.toLowerCase()==="navigation"?"":l.title;const h=l.path.split("/").slice(0,-1).join("/")||"/";a.configs[h]={...l,...l.body}}else a.contents.push(l);return a},{configs:{},contents:[]}),o=a=>({...C(["title",...r])(a),...a.meta,...O(a?.navigation)?a.navigation:{}}),c=a=>({...C(["title",...r])(a),...O(a?.navigation)?a.navigation:{}}),d=s.reduce((a,l)=>{const h=l.path.substring(1).split("/"),p=l.stem.split("/"),m=!!p[p.length-1]?.match(/([1-9]\d*\.)?index/g),N=u=>({title:u.title,path:u.path,stem:u.stem,children:[],...c(u)}),f=N(l);if(m){const u=n[f.path];if(typeof u?.navigation<"u"&&u?.navigation===!1)return a;if(l.path!=="/"){const g=N(l);f.children.push(g)}u&&Object.assign(f,o(u))}if(h.length===1){const u=a.find(g=>g.path===f.path&&g.page===!1);return m&&u?Object.assign(u,{page:void 0,children:[...f.children||[],...u.children||[]]}):a.push(f),a}const T=h.slice(0,-1).reduce((u,g,A)=>{const j="/"+h.slice(0,A+1).join("/"),S=n[j];if(typeof S?.navigation<"u"&&S.navigation===!1)return[];let b=u.find($=>$.path===j);if(!b){const $=S?o(S):{};b={...$,title:$.title||X(g),path:j,stem:p.slice(0,A+1).join("/"),children:[],page:!1},u.push(b)}return b.children},a),w=T.find(u=>u.path===f.path&&u.page===!1);return w?Object.assign(w,{...f,page:void 0,children:[...f.children||[],...w.children||[]]}):T.push(f),a},[]);return k(d)}function k(t){const r=t;for(const e of r)e.children?.length?k(e.children):delete e.children;return t}function O(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}const X=t=>t.split(/[\s-]/g).map(Q).join(" "),R=/^h([1-6])$/,z=t=>R.test(t);async function J(t,r){const{ignoredTags:e=[],extraFields:i=[]}={};return(await t.where("extension","=","md").select("path","body","description","title",...i||[]).all()).flatMap(n=>Z(n,{ignoredTags:e,extraFields:i}))}function Z(t,{ignoredTags:r,extraFields:e}){const i=!t.body||t.body?.type==="root"?t.body:G(t.body),s=t.path??"",n=C(e)(t),o=[{...n,id:s,title:t.title||"",titles:[],content:(t.description||"").trim(),level:1}];if(!i?.children)return o;let c=1,d=0;const a=[t.title??""];for(const l of i.children){const h=l.tag||"";if(z(h)){const p=Number(h.match(R)?.[1]??0),m=x(l).trim();p===1?a.splice(0,a.length):p<d?a.splice(p-1,a.length-1):p===d&&a.pop(),o.push({...n,id:`${s}#${l.props?.id}`,title:m,titles:[...a],content:"",level:p}),a.push(m),d=p,c+=1}else{const p=x(l,r).trim();if(c===1&&o[c-1]?.content===p)continue;o[c-1].content=`${o[c-1].content} ${p}`.trim()}}return o}function x(t,r=[]){let e="";return t.type==="text"&&(e+=t.value||""),r.includes(t.tag??"")?"":(t.children?.length&&(e+=t.children.map(i=>x(i,r)).filter(Boolean).join("")),e)}async function ct(t,r){return await $fetch(`/__nuxt_content/${r}/sql_dump.txt`,{context:{},responseType:"text",headers:{"content-type":"text/plain"},query:{v:L[String(r)],t:void 0}})}async function tt(t,r,e){return await $fetch(`/__nuxt_content/${r}/query`,{context:t?{cloudflare:t.context.cloudflare}:{},headers:{"content-type":"application/json",...t?.node?.req?.headers?.cookie?{cookie:t.node.req.headers.cookie}:{}},query:{v:L[String(r)],t:void 0},method:"POST",body:{sql:e}})}const et=t=>{const r=q()?.ssrContext?.event;return K(t,(e,i)=>nt(r,e,i))};function lt(t,r){return U(t,e=>V(e,r))}function ut(t,r){return U(t,e=>J(e))}async function nt(t,r,e){return window.WebAssembly?it(r,e):tt(t,String(r),e)}async function it(t,r){return await P(()=>import("./xnsVXtE6.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(i=>i.loadDatabaseAdapter(t)).then(i=>i.all(r))}function U(t,r){const e=et(t),i={where(s,n,o){return e.where(String(s),n,o),i},andWhere(s){return e.andWhere(s),i},orWhere(s){return e.orWhere(s),i},order(s,n){return e.order(String(s),n),i},then(s,n){return r(e).then(s,n)},catch(s){return this.then(void 0,s)},finally(s){return this.then(void 0,void 0).finally(s)},get[Symbol.toStringTag](){return"Promise"}};return i}export{ut as a,lt as b,at as c,Y as d,L as e,ct as f,st as k,Q as p,et as q,G as t,ot as u};
