(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{396:function(t,e,a){},448:function(t,e,a){"use strict";a(396)},454:function(t,e,a){"use strict";a.r(e);var l=a(84),s=(a(128),a(208),a(87),a(118),a(206),a(64),a(65),a(362),a(8),a(20),a(26),a(423),a(386),a(33),a(361),a(426),a(427),a(429),a(88),a(430)),r=a.n(s),o=a(185),n=a.n(o),i=(a(219),a(220),{name:"CodelistPage",props:["codelist","lang"],data:function(){return{description:null,categoryCodelist:null,url:null,codes:[],fields:[],downloadURLs:[],lastUpdatedDate:null,perPage:500,currentPage:1,totalRows:0,filter:null,isBusy:!0}},beforeMount:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.get("/api/json/".concat(t.lang,"/").concat(t.codelist,".json"));case 2:a=e.sent,t.fields=Object.keys(a.data.data[0]).map((function(e){var a={key:e,sortable:!0,tdClass:["description","url"].includes(e)?e:null,label:t.$themeLocaleConfig.headers[e]?t.$themeLocaleConfig.headers[e]:null};return"status"==e&&(a.formatter="statusFormatter"),a})),t.codes=a.data.data,t.description=["",null].includes(a.data.metadata.description)?null:t.rstToHtml(a.data.metadata.description.trim()),t.lastUpdatedDate=a.data.metadata["last-updated-date"]?a.data.metadata["last-updated-date"]:null,t.categoryCodelist=a.data.attributes["category-codelist"]?a.data.attributes["category-codelist"]:null,t.url=a.data.metadata.url?a.data.metadata.url:null,t.downloadURLs=[{url:"/api/xml/".concat(t.codelist,".xml"),format:"XML"},{url:"/api/csv/".concat(t.lang,"/").concat(t.codelist,".csv"),format:"CSV"},{url:"/api/xlsx/".concat(t.lang,"/").concat(t.codelist,".xlsx"),format:"XLSX"},{url:"/api/json/".concat(t.lang,"/").concat(t.codelist,".json"),format:"JSON"}],t.totalRows=t.codes.length,t.isBusy=!1;case 12:case"end":return e.stop()}}),e)})))()},watch:{codes:{handler:"handleScroll"}},methods:{isValidUrl:function(t){try{return new URL(t),!0}catch(t){return!1}},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},handleScroll:function(){var t=this.$route.hash.split("#")[1];if(this.$route.hash){if(this.totalRows>this.perPage){var e=this.codes.findIndex((function(e){return e.code==t}))+1,a=Math.ceil(e/parseFloat(this.perPage));this.currentPage=a}setTimeout((function(){var e=document.getElementById(t);n.a.scrollTo(e,500)}),300)}},rowClass:function(t,e){if(t)return"withdrawn"===t.status?"withdrawn-code":t["budget-alignment:status"]&&""!=t["budget-alignment:status"]?"table-danger":void 0},statusFormatter:function(t){return this.columnFormatter("status",t)},columnFormatter:function(t,e){return this.$themeLocaleConfig.columnValues&&this.$themeLocaleConfig.columnValues[t][e]?this.$themeLocaleConfig.columnValues[t][e]:e},rstToHtml:function(t){return t.replace(/\n/g,"<br>").replace(/`([^<]+) <([^>]+)>`__/g,'<a href="$2">$1</a>')}}}),c=(a(448),a(58)),u=Object(c.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",[a("b-col",{attrs:{md:"8"}},[a("h2",[t._v(t._s(this.$frontmatter.title))]),t._v(" "),t.lastUpdatedDate?a("p",{staticClass:"text-muted"},[t._v("\n        "+t._s(this.$themeLocaleConfig.lastUpdated)+": "+t._s(t.lastUpdatedDate)+"\n      ")]):t._e()]),t._v(" "),a("b-col",{staticClass:"md-text-right",attrs:{md:"4"}},[a("b-dropdown",{staticClass:"download-dropdown",attrs:{text:this.$themeLocaleConfig.download,right:""}},t._l(t.downloadURLs,(function(e){return a("b-dropdown-item",{attrs:{href:e.url}},[t._v(t._s(e.format))])})),1)],1)],1),t._v(" "),a("b-alert",{attrs:{show:null!=t.description||null!=t.categoryCodelist||null!=t.url}},[t.description?a("p",[a("i",{domProps:{innerHTML:t._s(t.description)}})]):t._e(),t._v(" "),t.categoryCodelist?a("p",[t._v(t._s(this.$themeLocaleConfig.categorisedCodelist)+"\n    "),a("router-link",{attrs:{to:"../"+t.categoryCodelist}},[a("code",[t._v(t._s(t.categoryCodelist))])]),t._v(".")],1):t._e(),t._v(" "),t.url?a("p",[t._v(t._s(this.$themeLocaleConfig.source)+": "),a("a",{attrs:{href:t.url}},[t._v(t._s(t.url))])]):t._e()]),t._v(" "),t.codes?a("b-row",[a("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-cols-sm":!1,"label-cols-md":"3","label-cols-lg":"2","label-align-lg":"right","label-size":"sm","label-for":"filterInput"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-append",[a("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),t._v(" "),t.totalRows>t.perPage?a("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Page","label-cols-sm":!1,"label-cols-md":"3","label-cols-lg":"2","label-align-lg":"right","label-size":"sm"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1):t._e()],1):t._e(),t._v(" "),a("b-table",{attrs:{fields:t.fields,items:t.codes,"tbody-tr-class":t.rowClass,"current-page":t.currentPage,"per-page":t.perPage,busy:t.isBusy,filter:t.filter,responsive:""},on:{filtered:t.onFiltered},scopedSlots:t._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center"},[a("b-spinner",{staticClass:"align-middle",attrs:{label:"Loading..."}}),t._v(" "),a("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(url)",fn:function(e){return[t.isValidUrl(e.item.url)?[a("a",{attrs:{href:e.item.url}},[t._v(t._s(e.item.url))])]:[t._v("\n        "+t._s(e.item.url)+"\n      ")]]}},{key:"cell(code)",fn:function(e){return[a("a",{staticStyle:{visibility:"hidden","padding-top":"73px"},attrs:{id:e.item.code}}),t._v(" "),a("router-link",{attrs:{to:"#"+e.item.code}},[t._v(t._s(e.item.code))])]}},t.categoryCodelist?{key:"cell(category)",fn:function(e){return[null!=e.item.category?t._l(e.item.category.split(";").sort(),(function(e){return a("span",{key:e,staticClass:"category-item"},[a("router-link",{attrs:{to:"../"+t.categoryCodelist+"/#"+e}},[t._v(t._s(e))])],1)})):t._e()]}}:null],null,!0)}),t._v(" "),t.totalRows>t.perPage?a("b-form-group",{staticClass:"mb-0",attrs:{label:"Page","label-cols-sm":"1","label-align-lg":"right","label-size":"sm"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1):t._e()],1)}),[],!1,null,null,null);e.default=u.exports}}]);